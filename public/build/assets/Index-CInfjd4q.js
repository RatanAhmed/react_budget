import{W as T,r as f,j as e,Y as M}from"./app-s1ld8U3o.js";import{A}from"./AuthenticatedLayout-BxA_AKwT.js";import{T as v,I as r}from"./TextInput-DoaM2CiV.js";import{P as N}from"./PrimaryButton-vCoUeq-m.js";import{I as d}from"./InputLabel-eBeSzEiB.js";import{M as B}from"./Modal-D85g7Dq9.js";import{D as y,S as q}from"./SecondaryButton-BMQKgP1a.js";import P from"./ExpenseFilter-BXpxco2g.js";import{C as z}from"./circle-plus-CZWOVlZh.js";import{X as L}from"./x-CE_mx32y.js";import"./ApplicationLogo-Cj2IZOk9.js";import"./transition-CBm33KZX.js";import"./funnel-Ce_BgLo6.js";import"./createLucideIcon-6QRUi_VY.js";function ee({auth:w,expenses:i,incomes:g,budgets:u,categories:h}){const n=new Date,C=n.toISOString().split("T")[0],{data:a,setData:t,post:_,processing:S,reset:x,errors:l}=T({id:"",date:n.toISOString().split("T")[0],amount:"",details:"",budget_id:"",income_id:"",category_id:"",month:n.getMonth()+1,year:n.getFullYear()}),k=(i??[]).reduce((s,o)=>s+Number(o.amount),0),F=s=>{const o=i.find(m=>m.id==s);t(o),c(!0)},I=s=>{s.preventDefault(),_(route("expense.store"),{onSuccess:()=>{x(),c(!1)}})},[D,c]=f.useState(!1),E=()=>{c(!0)},j=()=>{c(!1),x()};return f.useState(!1),e.jsxs(A,{user:w.user,children:[e.jsx(M,{title:"Expense"}),e.jsxs("div",{className:"sm:p-4 lg:p-6",children:[e.jsxs("div",{className:"bg-white rounded-md border border-gray-50 shadow-md",children:[e.jsxs("div",{className:"bg-green-50 p-2 flex justify-between gap-2  rounded-t-md",children:[e.jsx("div",{className:"text-xl font-semibold px-2 p-1",children:"Expense List"}),e.jsx("div",{children:e.jsxs(N,{type:"button",onClick:E,children:["Expense "," "," ",e.jsx(z,{size:20})]})})]}),e.jsxs("div",{className:"p-2 sm:p-4 lg:p-6",children:[e.jsx("div",{className:"flex justify-between gap-2",children:e.jsxs("div",{children:["Total Expenses: ",k,e.jsx(P,{categories:h,today:C,incomes:g,budgets:u})]})}),e.jsx("div",{children:e.jsxs("table",{className:"table-auto w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-slate-300",children:"Date"}),e.jsxs("th",{className:"border border-slate-300 text-start",children:[e.jsx("span",{className:"bg-green-50 p-1 rounded",children:"Category"})," ",e.jsx("span",{className:"bg-white p-1 rounded",children:"Details"})," ",e.jsx("span",{className:"bg-gray-200 p-1 rounded",children:"Source"})," ",e.jsx("span",{className:"bg-orange-100 p-1 rounded",children:"Budget"})]}),e.jsx("th",{className:"border border-slate-300",children:"Amount"})]})}),e.jsx("tbody",{children:i.length>0&&i.map((s,o)=>{var m,p,b;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center border border-slate-300",children:s.date}),e.jsxs("td",{onClick:()=>F(s.id),className:"cursor-pointer text-left border border-slate-300",children:[e.jsx("span",{className:"bg-green-50 p-1 rounded",children:(m=s==null?void 0:s.category)==null?void 0:m.name})," ",s.details," ",e.jsx("span",{className:"bg-gray-200  p-1 rounded",children:(p=s==null?void 0:s.budget)==null?void 0:p.title})," ",e.jsx("span",{className:"bg-orange-100 p-1 rounded",children:(b=s==null?void 0:s.income)==null?void 0:b.details})]}),e.jsx("td",{className:"text-center border border-slate-300",children:s==null?void 0:s.amount})]},o)})})]})})]})]}),e.jsx(B,{show:D,onClose:j,children:e.jsxs("form",{onSubmit:I,className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"text-xl font-semibold",children:"Add Expenses"}),e.jsx(y,{className:"px-2",onClick:j,children:e.jsx(L,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"date",value:"Date"}),e.jsx(v,{id:"date",type:"date",className:"mt-1 block w-full",value:(a==null?void 0:a.date)||"",onChange:s=>t("date",s.target.value),required:!0,isFocused:!0,autoComplete:"date",placeholder:"date of expense"}),e.jsx(r,{className:"mt-2",message:l.date})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"amount",value:"Amount"}),e.jsx(v,{id:"amount",income_id:"number",min:"0",type:"number",className:"mt-1 block w-full",value:a==null?void 0:a.amount,onChange:s=>t("amount",s.target.value),required:!0,isFocused:!0,autoComplete:"amount",placeholder:"amount of expense"}),e.jsx(r,{className:"mt-2",message:l.amount})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx(d,{className:"",htmlFor:"details",value:"Details"}),e.jsx("textarea",{value:a.details,placeholder:"details about expense",className:"block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm",onChange:s=>t("details",s.target.value)}),e.jsx(r,{message:l.details,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[e.jsxs("div",{className:"",children:[e.jsx(d,{htmlFor:"budget_id",value:"Budget Type"}),e.jsxs("select",{value:a.budget_id??null,required:!0,onChange:s=>t("budget_id",s.target.value),className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full",children:[e.jsx("option",{value:"0",children:"Select"}),u&&u.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))]}),e.jsx(r,{className:"mt-2",message:l.budget_id})]}),e.jsxs("div",{className:"",children:[e.jsx(d,{htmlFor:"income_id",value:"Income Type"}),e.jsxs("select",{value:a.income_id??null,onChange:s=>t("income_id",s.target.value),className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full",children:[e.jsx("option",{value:"0",children:"Select"}),g.map(s=>e.jsx("option",{value:s.id,children:s.details},s.id))]}),e.jsx(r,{className:"mt-2",message:l.income_id})]}),e.jsxs("div",{className:"",children:[e.jsx(d,{htmlFor:"category_id",value:"Category"}),e.jsxs("select",{value:a.category_id??null,onChange:s=>t("category_id",s.target.value),className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full",children:[e.jsx("option",{value:"0",children:"Select"}),h&&h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(r,{className:"mt-2",message:l.category_id})]})]}),e.jsxs("div",{className:"flex gap-2 justify-between mt-4",children:[e.jsx("div",{children:e.jsx(y,{onClick:j,children:"Close "})}),e.jsxs("div",{className:"flex gap-2 justify-between",children:[e.jsx(q,{type:"button",onClick:s=>{x()},children:"Clear"}),e.jsx(N,{disabled:S,children:"Submit"})]})]})]})})]})]})}export{ee as default};
